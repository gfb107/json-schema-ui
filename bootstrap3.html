<html language="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous">
    <title>Json Editor Bootstrap 3 Test</title>
    <style type="text/css">
        body{
            margin: 0.5in;
            padding: 0;
            font-size: 14px;
            font-family: Roboto, sans-serif;
        }
    </style>
  </head>
  <body>
    <h2>JSON Editor Bootstrap 3 Test</h2>
    <div id="target"></div>
    <script type="text/javascript">
      console.log( 'index script' );
      window.addEventListener( 'load', function() {
      console.log( 'on load' );
      const schema = {
        "title": "Test Schema",
        "definitions":{
          "horizontal": {
            "type": "object",
            "format": "horizontal",
            "title": "Horizontal fields",
            "description": "Single line for each property (assuming adequate width), with alignment",
            "properties": {
              "string": {
                "title": "String input",
                "description": "Enter a string with at least 5 characters, but no more than 10",
                "type": "string",
                "minLength": 5,
                "maxLength": 10
              }
            }
          },
          "period":{
            "type":"string",
            "oneOf":[{
              "const":"earlyMorning","title":"Early Morning (Midnight to 6AM)"
            },{
              "const":"morning","title":"Morning (6AM to Noon)"
            },{
              "const":"afternoon","title":"Afternoon (Noon to 6PM)"
            },{
              "const":"night","title":"Night (6PM to Midnight)"
            }],
            "options":{"grid_columns":3}
          },
          "periodsOfDay":{
            "type":"array",
            "uniqueItems":true,
            "minItems":1,
            "items":{"$ref":"#/definitions/period"},
            "default":["earlyMorning","morning","afternoon","night"]
          },
          "price":{
            "title":"Price",
            "type":"number",
            "minimum":0,
            "multipleOf":0.01
          },
          "adjustment":{
            "type":"number",
            "multipleOf":0.01
          },
          "periodPrices":{
            "type":"object",
            "format":"table",
            "properties":{
              "earlyMorning":{"$ref":"#/definitions/price"},
              "morning":{"$ref":"#/definitions/price"},
              "afternoon":{"$ref":"#/definitions/price"},
              "night":{"$ref":"#/definitions/price"}
            },
            "required":["earlyMorning","morning","afternoon","night"],
            "default":{"earlyMorning":0,"morning":0,"afternoon":0,"night":0}
          },
          "seasonalAdjustments":{
            "type":"object",
            "format":"table",
            "properties":{
              "spring":{"$ref":"#/definitions/periodPrices"},
              "summer":{"$ref":"#/definitions/periodPrices"},
              "fall":{"$ref":"#/definitions/periodPrices"},
              "winter":{"$ref":"#/definitions/periodPrices"}
            },
            "required": [ "spring", "summer", "fall", "winter" ]
          },
          "rateTable":{
            "type":"object",
            "properties":{
              "base":{"$ref":"#/definitions/periodPrices"},
              "seasonalAdjustments":{"$ref":"#/definitions/seasonalAdjustments"}
            },
            "required":["base"],
            "default":{
              "base":{"earlyMorning":0,"morning":0,"afternoon":0,"night":0}
            }
          }
        },
        "type": "object",
        "properties":{
          "horizontal": {
            "$ref": "#/definitions/horizontal"
          },
        },
        "required": [ "horizontal" ]
      };

        const value = {
          "horizontal": {
            "string": "abdef"
          }
        };
        const container = document.getElementById( 'target' );
        const editor = JsonHelper.editor({ value, schema, container, theme: JsonHelper.theme( 'bootstrap3' )});
        editor.on( 'change', ( editor, data ) => console.log( 'EditorTest.onChange', editor, data ));
    })
    </script>
  </body>
</html>
